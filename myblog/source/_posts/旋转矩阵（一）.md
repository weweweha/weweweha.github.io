---
title: 旋转矩阵（一）
date: 2023-04-01 17:05:47
tags:
---

# 旋转矩阵(一)

## 1.定义

$$
^A_BR=\left[\begin{matrix}
\widehat{X}_B\cdot\widehat{X}_A&\widehat{Y}_B\cdot\widehat{X}_A&\widehat{Z}_B\cdot\widehat{X}_A\\
\widehat{X}_B\cdot\widehat{Y}_A&\widehat{Y}_B\cdot\widehat{Y}_A&\widehat{Z}_B\cdot\widehat{Y}_A\\
\widehat{X}_B\cdot\widehat{Z}_A&\widehat{Y}_B\cdot\widehat{Z}_A&\widehat{Z}_B\cdot\widehat{Z}_A\\
\end{matrix}\right]
$$

​																									(公式1.1)

​		上述公式（1.1）中，$$^A_BR$$表示坐标B相对与坐标A的旋转矩阵(Rotation Matrix)，其中三列分别表示B坐标的X Y Z向量 分别在 A坐标X Y Z 轴上的投影值。（如 $\widehat{X}_B\cdot\widehat{X}_A$指B坐标系的X方向向量在A坐标系X轴上的投影值）

## 2.特性

### 2.1  B对A的旋转矩阵等于A对B的旋转矩阵的转置矩阵

$$
^A_BR=\left[\begin{matrix}
\widehat{X}_B\cdot\widehat{X}_A&\widehat{Y}_B\cdot\widehat{X}_A&\widehat{Z}_B\cdot\widehat{X}_A\\
\widehat{X}_B\cdot\widehat{Y}_A&\widehat{Y}_B\cdot\widehat{Y}_A&\widehat{Z}_B\cdot\widehat{Y}_A\\
\widehat{X}_B\cdot\widehat{Z}_A&\widehat{Y}_B\cdot\widehat{Z}_A&\widehat{Z}_B\cdot\widehat{Z}_A\\
\end{matrix}\right]
=
\left[\begin{matrix}
\widehat{X}_A\cdot\widehat{X}_B&\widehat{X}_A\cdot\widehat{Y}_B&\widehat{X}_A\cdot\widehat{Z}_B\\
\widehat{Y}_A\cdot\widehat{X}_B&\widehat{Y}_A\cdot\widehat{Y}_B&\widehat{Y}_A\cdot\widehat{Z}_B\\
\widehat{Z}_A\cdot\widehat{X}_B&\widehat{Z}_A\cdot\widehat{Y}_B&\widehat{Z}_A\cdot\widehat{Z}_B\\
\end{matrix}\right]
=
\left[\begin{matrix}
\widehat{X}_A\cdot\widehat{X}_B&\widehat{Y}_A\cdot\widehat{X}_B&\widehat{Z}_A\cdot\widehat{X}_B\\
\widehat{X}_A\cdot\widehat{Y}_B&\widehat{Y}_A\cdot\widehat{Y}_B&\widehat{Z}_A\cdot\widehat{Y}_B\\
\widehat{X}_A\cdot\widehat{Z}_B&\widehat{Y}_A\cdot\widehat{Z}_B&\widehat{Z}_A\cdot\widehat{Z}_B\\
\end{matrix}\right]^T
=^B_AR^T
$$

### 2.2 一个旋转矩阵的转置矩阵与其反矩阵相同

#### 2.2.1结论

$$
^A_BR^T=^A_BR^{-1}
$$

#### 2.2.2论证

$$
\left[
\begin{matrix}
\widehat{X}_B\cdot\widehat{X}_A&\widehat{Y}_B\cdot\widehat{X}_A&\widehat{Z}_B\cdot\widehat{X}_A
\end{matrix}
\right]
\,
\left[
\begin{matrix}
\widehat{X}_A\cdot\widehat{X}_B\\
\widehat{X}_A\cdot\widehat{Y}_B\\
\widehat{X}_A\cdot\widehat{Z}_B\\
\end{matrix}
\right]
\,
=1
\\
(这两个单位向量方向相同，积为1)
\\
\left[
\begin{matrix}
\widehat{X}_B\cdot\widehat{X}_A&\widehat{Y}_B\cdot\widehat{X}_A&\widehat{Z}_B\cdot\widehat{X}_A
\end{matrix}
\right]
\,
\left[
\begin{matrix}
\widehat{Y}_A\cdot\widehat{X}_B\\
\widehat{Y}_A\cdot\widehat{Y}_B\\
\widehat{Y}_A\cdot\widehat{Z}_B\\
\end{matrix}
\right]
\,
=0
\\
(这两个单位向量夹角为90°，积为0)
$$



$$
^A_BR\,^A_BR^T=\left[\begin{matrix}
\widehat{X}_B\cdot\widehat{X}_A&\widehat{Y}_B\cdot\widehat{X}_A&\widehat{Z}_B\cdot\widehat{X}_A\\
\widehat{X}_B\cdot\widehat{Y}_A&\widehat{Y}_B\cdot\widehat{Y}_A&\widehat{Z}_B\cdot\widehat{Y}_A\\
\widehat{X}_B\cdot\widehat{Z}_A&\widehat{Y}_B\cdot\widehat{Z}_A&\widehat{Z}_B\cdot\widehat{Z}_A\\
\end{matrix}\right]
\,
\left[\begin{matrix}
\widehat{X}_A\cdot\widehat{X}_B&\widehat{Y}_A\cdot\widehat{X}_B&\widehat{Z}_A\cdot\widehat{X}_B\\
\widehat{X}_A\cdot\widehat{Y}_B&\widehat{Y}_A\cdot\widehat{Y}_B&\widehat{Z}_A\cdot\widehat{Y}_B\\
\widehat{X}_A\cdot\widehat{Z}_B&\widehat{Y}_A\cdot\widehat{Z}_B&\widehat{Z}_A\cdot\widehat{Z}_B\\
\end{matrix}\right]
=
\left[\begin{matrix}
1&0&0\\
0&1&0\\
0&0&1\\
\end{matrix}\right]
=I_3
=^A_BR\,^A_BR^{-1}
$$

得出结果：
$$
^A_BR^T=^A_BR^{-1}
$$

### 2.3 旋转矩阵 DOF：自由度

DOF(Degree Of Freedom)

一个旋转矩阵虽然有9个数字，但是每一列都为单位矩阵（即每一列平方和开根号为1），且每一列向量两两垂直，所有其实旋转矩阵只有3个DOF。

## 3.旋转矩阵的用法 aa

### 3.1.1.描述一个Frame相对于两一个Frame的姿态

### 3.1.2.将一个Point由相对于A的姿态表示转换到相对于B的姿态表示

$$
^BR=^B_AR\,^AR
$$

### 3.1.3.将Point在同一个Frame下进行转动

$$
^BR^`=R(\theta)^BR
$$

## 4.旋转矩阵按照三个角度转动的两种不同方式

1.Fixed Angles：按照固定不动的转轴旋转

2.Euler Angles：按照Frame转动后当下的转轴进行旋转

## 5.Fixed Angles:

### 5.1绕X轴旋转

$$
R_{\widehat{X}}(\theta)=
\left[
\begin{matrix}
1&0&0\\
0&\cos\theta&-\sin\theta\\
0&\sin\theta&\cos\theta\\
\end{matrix}
\right]
$$

### 5.2绕Y轴旋转

$$
R_{\widehat{Y}}(\theta)=
\left[
\begin{matrix}
\cos\theta&0&\sin\theta\\
0&1&0\\
-\sin\theta&0&\cos\theta\\
\end{matrix}
\right]
$$



### 5.3绕Z轴旋转

$$
R_{\widehat{Z}}(\theta)=
\left[
\begin{matrix}
\cos\theta&-\sin\theta&0\\
\sin\theta&cos\theta&0\\
0&0&1\\
\end{matrix}
\right]
$$

### 5.4按照XYZ顺序旋转

$$
^A_BR_{XYZ}(\gamma,\beta,\alpha)=R_Z(\alpha)R_Y(\beta)R_X(\gamma)
$$

可以看到旋转矩阵的顺序是Z Y X ，由（3.3）所得$$^AR^`=^A_BR\,^BR,配合上述公式，可以得到，^AR^`=\,^A_BR_{XYZ}(\gamma,\beta,\alpha)\cdot^BR=R_Z(\alpha)R_Y(\beta)R_X(\gamma)\cdot^BR$$

这样的话就保证是按照XYZ的顺序进行的旋转

## 6.Tenomatix实例演示

### 6.1 将一个Point由相对于A的姿态表示转换到相对于B的姿态表示$$^BR=^B_AR\,^AR$$

![](/images/Tecnomatix_pic1.png)

可以看到上图中共有三个正方体。我们要通过上述结论通过红色方块相对于蓝色方块的旋转矩阵推算出红色方块相对于橙色方块的旋转矩阵。(为方便计算，以下运算中蓝色为A，红色为B，橙色为C)

![](/images/Tecnomatix_pic2.png)

上图为B正方体相对于A正方体的姿态

根据以上结论推到得$$^C_BR=^C_AR\,^A_BR$$

其中$$^A_BR=^A_BR_{XYZ}(\gamma,\beta,\alpha)=R_Z(13.06^o)R_Y(26.51^o)R_X(31.46^o)$$
